#
# this file is used to create vslib.a library makefile
#

CC  = g++
LD  = g++
AR  = ar rv
RANLIB = ranlib
LD  = g++

############################################################################
# make vstring.a

#MODULES = pcre2

[vstring.a]

# DEFAULT = 1

RANLIB  = $(RANLIB)
CCFLAGS = -I. -O2 -Wpedantic -Wextra -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 $(CFLAGS) $(CPPFLAGS) $(CCDEF)
LDFLAGS = $(LDFLAGS) $(LDDEF)
TARGET  = libvstring.a
SRC     = vstring.cpp vstrlib.cpp vref.cpp

[wstring.a]

# DEFAULT = 1

RANLIB  = $(RANLIB)
CCFLAGS = -I. -O2 -Wpedantic -Wextra -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 $(CFLAGS) $(CPPFLAGS) $(CCDEF)
LDFLAGS = $(LDFLAGS) $(LDDEF)
TARGET  = libwstring.a
SRC     = wstring.cpp wstrlib.cpp vref.cpp


[test:vstring.a]

RANLIB  = $(RANLIB)
CCFLAGS = -I. -O2 -g -Wpedantic -Wextra -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 $(CFLAGS) $(CPPFLAGS) $(CCDEF)
LDFLAGS = -L. -lvstring -lpcre2-8 -lpcre2-32 $(LDFLAGS) $(LDDEF)
TARGET  = test
SRC    += test.cpp

[wtest:wstring.a]

RANLIB  = $(RANLIB)
CCFLAGS = -I. -O2 -g -Wpedantic -Wextra -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 $(CFLAGS) $(CPPFLAGS) $(CCDEF)
LDFLAGS = -L. -lwstring -lvstring -lpcre2-8 -lpcre2-32 $(LDFLAGS) $(LDDEF)
TARGET  = wtest
SRC    += wtest.cpp

